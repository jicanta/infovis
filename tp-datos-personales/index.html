<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>TP datos personales</title>
  <style>
    :root{
      --max-width: 1200px;
      --gap: 1.25rem;
      --radius: 12px;
      --card-bg: #fafafa;
      --card-bd: #e6e6e6;
      --embed-min-h: 480px;   /* altura mínima común para incrustados */
      --embed-ratio: 0.5625;  /* 16:9 -> 9/16 */
    }
    * { box-sizing: border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans";
      line-height:1.45;
      color:#111;
      padding:1rem;
      background:#fff;
    }
    .container{ max-width:var(--max-width); margin:0 auto; }
    h1{ font-size:clamp(1.5rem, 1.2rem + 1.5vw, 2.25rem); margin:0 0 1rem 0; }

    .charts-grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:var(--gap);
      align-items:start;
      margin-top:1rem;
    }
    @media (max-width: 900px){
      .charts-grid{ grid-template-columns: 1fr; }
    }

    .chart-card{
      border:1px solid var(--card-bd);
      border-radius:var(--radius);
      padding:1rem;
      background:var(--card-bg);
      margin-top:1rem;
    }
    .chart-card h2{
      font-size: clamp(1.1rem, 1rem + 0.8vw, 1.5rem);
      margin:0 0 .75rem 0;
      font-weight:650;
    }

    /* Uniformidad para imágenes (tus SVG exportados) */
    .chart-card img{
      display:block;
      width:100%;
      height:auto;
      max-width:100%;
      max-height: 460px;     /* limita para que no “rompa” la tarjeta */
      object-fit: contain;
    }

    /* Contenedores embebidos con altura consistente */
    .embed-box{
      width:100%;
      min-height: var(--embed-min-h);
      position: relative;
    }

    /* Los iframes/objects llenan el contenedor */
    .embed-box iframe,
    .embed-box object,
    .embed-box .tableauViz {
      width:100% !important;
      height:100% !important;
      border:0;
      display:block;
    }

    /* Clases semánticas para identificar proveedores */
    .flourish-embed,
    .tableau-embed,
    .datawrapper-embed{
      width:100%;
      height:100%;
    }

    /* Para casos donde el proveedor autoajusta altura (Datawrapper), damos altura base */
    .datawrapper-embed{
      min-height: var(--embed-min-h);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Mi año entre el gimnasio, los exámenes y el clima de Buenos Aires</h1>

    <div class="charts-grid">
      <section class="chart-card" aria-labelledby="titulo-gym">
        <h2 id="titulo-gym">¿A qué <i>hora</i> suelo ir más seguido al gimnasio?</h2>
        <img src="gym-hours.svg" alt="Gráfico Stream Chart con frecuencia por hora del gimnasio">
      </section>

      <section class="chart-card" aria-labelledby="titulo-exams">
        <h2 id="titulo-exams">¿A qué <i>hora</i> suelo tener más exámenes?</h2>
        <img src="exams-hours.svg" alt="Gráfico Stream Chart con frecuencia por hora de exámenes">
      </section>
    </div>

    <section class="chart-card" aria-labelledby="titulo-relacion">
      <h2 id="titulo-relacion">Relación entre número de veces que fui al gym y exámenes que tuve en cierto mes</h2>
      <div class="embed-box" id="flourishBox">
        <div class="flourish-embed" data-src="story/3293472"></div>
      </div>
      <script src="https://public.flourish.studio/resources/embed.js" defer></script>
      <noscript>
        <img src="https://public.flourish.studio/story/3293472/thumbnail" width="100%" alt="visualization" />
      </noscript>
    </section>

    <!-- Tableau -->
    <section class="chart-card" aria-labelledby="titulo-tableau">
     <!-- <h2 id="titulo-tableau">¿Qué relación existe entre la cantidad de veces que fui al gym y mi promedio en exámenes?</h2> -->
      <div class='embed-box' id='tableauBox'>
        <div class='tableau-embed' id='viz1756763266024' style='position: relative'>
          <noscript>
            <a href='#'>
              <img alt='Relación entre la cantidad de veces que fui al gym y mi promedio en exámenes' 
                   src='https://public.tableau.com/static/images/Bo/Book3_17567631400870/Sheet1/1_rss.png' 
                   style='border: none' />
            </a>
          </noscript>
          <object class='tableauViz'>
            <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> 
            <param name='embed_code_version' value='3' /> 
            <param name='site_root' value='' />
            <param name='name' value='Book3_17567631400870/Sheet1' />
            <param name='tabs' value='no' />
            <param name='toolbar' value='yes' />
            <param name='static_image' value='https://public.tableau.com/static/images/Bo/Book3_17567631400870/Sheet1/1.png' />
            <param name='animate_transition' value='yes' />
            <param name='display_static_image' value='yes' />
            <param name='display_spinner' value='yes' />
            <param name='display_overlay' value='yes' />
            <param name='display_count' value='yes' />
            <param name='language' value='es-ES' />
            <param name='filter' value='publish=yes' />
          </object>
        </div>
      </div>
      <script type='text/javascript' defer>
        (function(){
          function sizeBox(el){
            if(!el) return;
            // Mantener 16:9 dentro de la tarjeta
            el.style.height = Math.max(el.offsetWidth * (9/16), parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--embed-min-h'))) + 'px';
          }
          function resizeAll(){
            sizeBox(document.getElementById('tableauBox'));
            sizeBox(document.getElementById('flourishBox'));
          }
          // Carga API de Tableau
          var vizWrap = document.getElementById('viz1756763266024');
          var vizObject = vizWrap ? vizWrap.getElementsByTagName('object')[0] : null;
          if(vizObject){
            var s = document.createElement('script');
            s.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
            s.onload = resizeAll;
            document.body.appendChild(s);
          }
          // Resize reactivo
          window.addEventListener('load', resizeAll);
          window.addEventListener('resize', resizeAll);
        })();
      </script>
    </section>

    <!-- NUEVO: Datawrapper -->
    <section class="chart-card" aria-labelledby="titulo-datawrapper">
      <h2 id="titulo-datawrapper">¿Qué relación existe entre la cantidad de veces que fui al gimnasio, la cantidad de exámenes que tuve y la nota promedio?</h2>
      <div class="embed-box">
        <iframe 
          title="¿Qué relación existe entre la cantidad de veces que fui al gimnasio, la cantidad de exámenes que tuve y la nota promedio en los mismos?" 
          aria-label="Grouped Bars" 
          id="datawrapper-chart-yXE0b" 
          src="https://datawrapper.dwcdn.net/yXE0b/2/" 
          scrolling="no" 
          frameborder="0" 
          class="datawrapper-embed"
          data-external="1"></iframe>
      </div>
      <script type="text/javascript">
        !function(){
          "use strict";
          window.addEventListener("message",function(a){
            if(void 0!==a.data["datawrapper-height"]){
              var e=document.querySelectorAll("iframe");
              for(var t in a.data["datawrapper-height"])
                for(var r,i=0;r=e[i];i++)
                  if(r.contentWindow===a.source){
                    var d=a.data["datawrapper-height"][t]+"px";
                    r.style.height=d
                  }
            }
          });
        }();
      </script>
    </section>

  </div>
</body>
</html>
